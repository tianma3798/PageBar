(function(a){var f=function(i,j){var g=this;var h={pageIndex:1,recordCount:1,pageSize:5,numberCount:3,showType:"bluePager",pageCount:10,showGoBtn:true,goBtnText:"确定",showAll:true,singleShow:false,submitEvent:function(k){this.tip("当前跳转到："+k)},async:false,tip:function(k){alert(k)}};g.opts=a.extend({},h,j);g.elem=i;g.opts.pageCount=Math.ceil(j.recordCount/j.pageSize)};f.prototype={init:function(){var g=this;var i=this.opts;var h=this.elem;if(i.recordCount<=0){return}this.getLeftNumberBtn();if(i.showGoBtn){this.createRightBtn()}h.append(d("clear"));this.setHot(i.pageIndex);g.initStyle()},initStyle:function(){var i=this;var g=this.elem;var h=this.opts;if(h.showType=="greenPager"){g.addClass("greenPager")}else{if(h.showType=="bluePager"){g.addClass("bluePager")}}var j=g.find(".pageBar_Go");var k=g.find(".pageBar_Number").width()+j.outerWidth()+3;g.width(k);j.css({top:(g.height()-j.height())/2+1});if(h.singleShow){if(h.pageCount==1){g.hide()}}},createRightBtn:function(){var i=this;var h=this.opts;var g=this.elem;var l=d("pageBar_Go");var n=d("text");var k="共"+h.pageCount+"页,去第";n.append("<label>"+k+"</label>");var p=a('<label class="textOuter"></label>');var o=a('<input type="text" class="goNumberValue"/>');o.val(h.pageIndex);p.append(o);n.append(p);l.append(n);n.append("<label>页</label>");n.append(c());var j=e("goToNumber");j.text(h.goBtnText);j.on("click",function(){i.goClick()});l.append(j);if(h.showAll){var m=h.recordCount+"条数据";l.append('<div class="text">'+m+"</div>")}this.elem.append(l)},goClick:function(){var g=this;var i=g.elem;var k=g.opts;var l=i.find(".goNumberValue");var h=l.val();var j=parseInt(h);if(isNaN(j)){l.val("");l.focus();k.tip("亲,输入的不是数字")}else{if(j<0){k.tip("请输入正整数...");l.focus();l.val("");return false}else{if(j<1){k.tip("亲，已经是第1页了");return false}else{if(j>k.pageCount){k.tip("亲，筛选结果总共"+k.pageCount+"页");l.focus();l.val("");return false}}}if(k.async){}else{if(g.getPageIndex()==j){return false}i.attr("pageindex",j);k.submitEvent()}}},getLeftNumberBtn:function(){var g=this;var j=g.elem;var o=g.opts;var p=d("pageBar_Number");var h=a('<span class="arrowLeft"/>');h.append('<em class="arrow-left"/>');h.click(function(){g.goToLeft()});p.append(h);p.append(g.createNumber(1));if(o.pageCount!=1){var l=a('<span class="moreLeft"/>');l.text("...");p.append(l);this.generageNumberBtn(p);var m=a('<span class="moreRight"/>');m.text("...");p.append(m);p.append(g.createNumber(o.pageCount,"last"))}var i=a('<span class="arrowRight" />');i.append('<em class="arrow-right"/>');i.click(function(){g.goToRight()});p.append(i);p.append(c());g.elem.append(p);var n=g.elem.find(".number");var k=n.eq(1).attr("data-value")-n.eq(0).attr("data-value");if(k==1){g.elem.find(".moreLeft").hide()}var q=n.last().attr("data-value")-n.eq(n.length-2).attr("data-value");if(q==1){g.elem.find(".moreRight").hide()}},setHot:function(h){if(this.opts.async){}else{this.elem.attr("pageindex",h);var g=this.elem.find(".number[data-value="+h+"]");g.addClass("Hot")}},generageNumberBtn:function(k){var g=this;var j=this.opts;var m=g.getPageIndex();var l=j.pageCount-1;var p=m-j.numberCount;var q=m+j.numberCount;p=p<2?2:p;q=q>l?l:q;var n=m+1-p;n=Math.abs(n);if(n<j.numberCount){q+=j.numberCount-n}var o=q+1-m;o=Math.abs(o);if(o<j.numberCount){p-=j.numberCount-o}for(var h=p;h<=q;h++){if(h>=j.pageCount||h<=1){continue}k.append(g.createNumber(h))}},createNumber:function(j,h){var g=this;var k=e("number");k.text(j).attr("data-value",j);k.bind("click",{thisObj:g},b.numberClick);if(h){k.addClass(h)}return k},goToLeft:function(){var g=this;var h=g.getPageIndex();h-=1;g.goToNumber(h)},goToRight:function(){var g=this;var h=g.getPageIndex();h+=1;g.goToNumber(h)},goToNumber:function(k,h){var g=this.elem;var l=this.opts;var i=this.getMaxNumber();var j=this.getMinNumber();if(l.async){}else{if(k>l.pageCount){l.tip("亲，没有下一页了");return false}else{if(k<1){l.tip("亲，没有上一页了");return false}}}g.attr("pageindex",k);if(h==false){return}l.submitEvent(k)},getMaxNumber:function(){var g=this.elem.find(".pageBar_Number .number").last();var i=g.attr("data-value");var h=parseInt(i);if(isNaN(h)){return this.opts.pageCount}return h},getMinNumber:function(){var g=this.elem.find(".pageBar_Number .number").first();var i=g.attr("data-value");var h=parseInt(i);if(isNaN(h)){return 1}return h},getPageIndex:function(){var h=this.elem.attr("pageindex");var g=parseInt(h);if(isNaN(g)){return parseInt(this.opts.pageIndex)}return g}};var b={numberClick:function(i){var g=i.data.thisObj;var j=parseInt(a(this).attr("data-value"));var h=g.getPageIndex();if(j==h){return false}g.goToNumber(j)}};function c(){return d("clear")}function d(h){var g=a("<div />");g.addClass(h);return g}function e(g){var h=a("<span />");h.addClass(g);return h}a.fn.pageBar=function(h){var g=new f(this,h);g.init();return g}})(jQuery);